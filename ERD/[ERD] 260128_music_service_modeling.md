## [TIL] 관계형 데이터베이스 모델링: 음악 서비스 데이터 설계

### 1. 프로젝트 개요 및 목적 

* **핵심 목적**: 가수, 음반, 노래 간의 관계를 분석하고, 데이터 중복을 최소화하며 확장성을 고려한 DB 스키마를 설계합니다.
* **설계 도구**: `draw.io`를 활용하여 개체-관계 다이어그램(ERD)을 시각화하였습니다.
* **주요 엔티티**: `Singer`(가수), `Album`(음반), `Song`(노래), `Creator`(창작자), `Genre`(장르) 등을 중심으로 구조화했습니다.

### 2. 정규화 및 데이터 분리 전략 

데이터의 일관성을 유지하고 유지보수를 용이하게 하기 위해 '코드성 데이터'를 별도 테이블로 분리했습니다.

* **타입 테이블 분리**: `Singer_type`(그룹/솔로), `Album_type`(정규/싱글) 등을 분리하여 오타를 방지하고 새로운 형식이 등장했을 때 유연하게 대응하도록 설계했습니다.
* **엔터테인먼트(Ent) 구조화**: 기획사와 발매사를 구분하여 참조할 수 있도록 설계하여 현실적인 비즈니스 로직을 반영했습니다.
* **장르의 다각화**: 장르를 단순히 텍스트로 넣지 않고 별도 테이블로 구성하여 노래, 앨범, 가수와 각각 연결함으로써 데이터 필터링이 가능하게 했습니다.

### 3. 고난도 관계 처리: 다대다(M:N)와 자기 참조 

가장 고민이 깊었던 부분으로, 복잡한 관계를 논리적인 테이블 구조로 풀어냈습니다.

* **매핑 테이블 활용**: '가수-노래', '노래-창작자' 처럼 양방향으로 여러 관계를 가질 수 있는 경우 중간 테이블을 생성하여 데이터를 관리합니다.
* **자기 참조(Self-Reference)를 통한 그룹 관리**: `Singer` 테이블 내의 데이터를 `Group_Artist`라는 중간 테이블로 연결했습니다. 이를 통해 '그룹'도 가수고 '멤버'도 가수라는 특성을 활용해 한 가수가 여러 그룹에 속할 수 있는 구조를 완성했습니다.

### 4. 핵심 설계 포인트 요약 

* **창작자 역할(Role) 세분화**: 작곡가와 작사가를 하나의 `Creator` 테이블로 통합하되, 연결 테이블에서 '역할' 필드를 두어 한 인물이 여러 역할을 수행하는 경우를 대비했습니다.
* **가격 데이터 관리**: 앨범 가격은 판매처나 시기에 따라 변동될 수 있는 휘발성 데이터이므로, 필요에 따라 `Album` 테이블에서 분리하여 이력을 관리할 수 있는 확장성을 고려했습니다.
* **데이터 무결성**: 모든 연결 고리에 외래키(FK)를 설정하여 부모 데이터가 삭제되거나 변경될 때 참조 무결성이 깨지지 않도록 설계했습니다.

### 5. 학습 포인트 (Troubleshooting) 

* **다대다 관계**: 처음에는 테이블 간 직접 연결을 시도했으나, 데이터 중복 문제를 발견하고 매핑 테이블의 필요성을 체감하며 논리적 설계를 수정했습니다.
* **식별자 설정**: PK(기본키)를 비즈니스 의미가 있는 값(이름 등)이 아닌 고유한 ID값으로 설정하여 데이터가 변해도 고유 식별이 가능하도록 구축했습니다.
* **현실 세계의 투영**: "한 가수가 여러 팀에 있을 수 있는가?", "한 노래에 작곡가가 여러 명일 수 있는가?"와 같은 실무적인 질문을 던지며 모델을 정교화하는 과정이 가장 중요하다는 것을 배웠습니다.

---
**오늘의 배움:** 단순히 테이블을 만드는 것에 그치지 않고, **데이터 간의 관계성(Relationship)**을 깊이 있게 고민하고 **미래의 확장성(정규화)**을 고려하는 과정이 탄탄한 서비스 구축의 시작임을 배웠습니다.

---
### 🖼️ 첨부: 최종 ERD 결과물

![Music_DB_ERD](https://github.com/user-attachments/assets/3fcabcbb-00c6-40f8-889a-ce103225a044)
